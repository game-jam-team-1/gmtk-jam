[gd_scene load_steps=35 format=3 uid="uid://cdxanxha8yc48"]

[ext_resource type="Script" uid="uid://c86i4sgfg7tpf" path="res://Scripts/player.gd" id="1_v0iea"]
[ext_resource type="Script" uid="uid://bub0fyvm5xhx4" path="res://Scripts/player_movement.gd" id="2_x3wgy"]
[ext_resource type="Script" uid="uid://bpfjf8wccyltd" path="res://Scripts/gravity_component.gd" id="3_3smsa"]
[ext_resource type="Texture2D" uid="uid://bs0nmcq3yreug" path="res://Assets/Art/player_sheet.png" id="3_6t5aa"]
[ext_resource type="Script" uid="uid://kxqmkedf0r42" path="res://Scripts/player_animation.gd" id="4_3smsa"]
[ext_resource type="PackedScene" uid="uid://dg1gbjos1jh51" path="res://Scenes/minimap.tscn" id="7_8erm5"]
[ext_resource type="Script" path="res://Scenes/death_screen.gd" id="8_8erm5"]
[ext_resource type="PackedScene" uid="uid://cso8oa456wo88" path="res://Scenes/dialog_box.tscn" id="8_f1ek2"]
[ext_resource type="Script" uid="uid://mdej2yvk32bd" path="res://Scripts/PlayerAudio.gd" id="8_tx1dd"]
[ext_resource type="AudioStream" uid="uid://cevgucdvjq7qi" path="res://Sounds/pickup.ogg" id="9_f1ek2"]
[ext_resource type="AudioStream" uid="uid://rbc6vwoe1xcb" path="res://Sounds/player_walk.ogg" id="9_gymyn"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_fj7yv"]
friction = 0.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6t5aa"]
size = Vector2(107, 184)

[sub_resource type="AtlasTexture" id="AtlasTexture_vgqql"]
atlas = ExtResource("3_6t5aa")
region = Rect2(3840, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_fkybt"]
atlas = ExtResource("3_6t5aa")
region = Rect2(3520, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_x3wgy"]
atlas = ExtResource("3_6t5aa")
region = Rect2(3200, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_igrcy"]
atlas = ExtResource("3_6t5aa")
region = Rect2(1600, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_qqcod"]
atlas = ExtResource("3_6t5aa")
region = Rect2(0, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_3smsa"]
atlas = ExtResource("3_6t5aa")
region = Rect2(1600, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_8erm5"]
atlas = ExtResource("3_6t5aa")
region = Rect2(1920, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_f1ek2"]
atlas = ExtResource("3_6t5aa")
region = Rect2(2240, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_tx1dd"]
atlas = ExtResource("3_6t5aa")
region = Rect2(2560, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_gymyn"]
atlas = ExtResource("3_6t5aa")
region = Rect2(2880, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_pu2lt"]
atlas = ExtResource("3_6t5aa")
region = Rect2(0, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_ukyrk"]
atlas = ExtResource("3_6t5aa")
region = Rect2(320, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_7dp3o"]
atlas = ExtResource("3_6t5aa")
region = Rect2(640, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_h4iuc"]
atlas = ExtResource("3_6t5aa")
region = Rect2(1280, 0, 320, 736)

[sub_resource type="AtlasTexture" id="AtlasTexture_fd4e3"]
atlas = ExtResource("3_6t5aa")
region = Rect2(960, 0, 320, 736)

[sub_resource type="SpriteFrames" id="SpriteFrames_qqcod"]
animations = [{
"frames": [{
"duration": 0.5,
"texture": SubResource("AtlasTexture_vgqql")
}, {
"duration": 0.5,
"texture": SubResource("AtlasTexture_fkybt")
}, {
"duration": 0.5,
"texture": SubResource("AtlasTexture_x3wgy")
}],
"loop": true,
"name": &"fly_loop",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_igrcy")
}],
"loop": true,
"name": &"idle_fly",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_qqcod")
}],
"loop": true,
"name": &"idle_grounded",
"speed": 5.0
}, {
"frames": [{
"duration": 0.3,
"texture": SubResource("AtlasTexture_3smsa")
}, {
"duration": 0.3,
"texture": SubResource("AtlasTexture_8erm5")
}, {
"duration": 0.3,
"texture": SubResource("AtlasTexture_f1ek2")
}, {
"duration": 0.3,
"texture": SubResource("AtlasTexture_tx1dd")
}, {
"duration": 0.3,
"texture": SubResource("AtlasTexture_gymyn")
}],
"loop": false,
"name": &"start_fly",
"speed": 5.0
}, {
"frames": [{
"duration": 0.7,
"texture": SubResource("AtlasTexture_pu2lt")
}, {
"duration": 0.7,
"texture": SubResource("AtlasTexture_ukyrk")
}, {
"duration": 0.7,
"texture": SubResource("AtlasTexture_7dp3o")
}],
"loop": false,
"name": &"start_walk",
"speed": 5.0
}, {
"frames": [{
"duration": 0.4,
"texture": SubResource("AtlasTexture_h4iuc")
}, {
"duration": 0.4,
"texture": SubResource("AtlasTexture_fd4e3")
}],
"loop": true,
"name": &"walk_loop",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_fj7yv"]
size = Vector2(83, 140)

[sub_resource type="CircleShape2D" id="CircleShape2D_v0iea"]
radius = 126.016

[sub_resource type="Animation" id="Animation_f1ek2"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ColorRect:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0, 0, 0, 1)]
}

[sub_resource type="Animation" id="Animation_8erm5"]
resource_name = "begin"
length = 2.0
step = 0.0333333
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ColorRect:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.466667, 1.93333),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0, 0, 0, 1), Color(0, 0, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_tx1dd"]
_data = {
&"RESET": SubResource("Animation_f1ek2"),
&"begin": SubResource("Animation_8erm5")
}

[node name="Player" type="RigidBody2D"]
physics_material_override = SubResource("PhysicsMaterial_fj7yv")
gravity_scale = 0.0
lock_rotation = true
script = ExtResource("1_v0iea")

[node name="PlayerMovement" type="Node2D" parent="."]
script = ExtResource("2_x3wgy")

[node name="GravityComponent" type="Area2D" parent="PlayerMovement" node_paths=PackedStringArray("parent")]
script = ExtResource("3_3smsa")
parent = NodePath("../..")
metadata/_edit_lock_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="PlayerMovement/GravityComponent"]
position = Vector2(0, -4)
shape = SubResource("RectangleShape2D_6t5aa")
debug_color = Color(0.478431, 0.588235, 0, 0.305882)
metadata/_edit_lock_ = true

[node name="FloorCasts" type="Node2D" parent="PlayerMovement"]
position = Vector2(0, 85)
metadata/_edit_lock_ = true

[node name="RayCast1" type="RayCast2D" parent="PlayerMovement/FloorCasts"]
position = Vector2(0, -11)
target_position = Vector2(0, 22)
metadata/_edit_lock_ = true

[node name="RayCast2" type="RayCast2D" parent="PlayerMovement/FloorCasts"]
position = Vector2(41, -11)
target_position = Vector2(0, 25)
metadata/_edit_lock_ = true

[node name="RayCast3" type="RayCast2D" parent="PlayerMovement/FloorCasts"]
position = Vector2(-40, -10)
target_position = Vector2(0, 23)
metadata/_edit_lock_ = true

[node name="PlayerAnimation" type="Node2D" parent="."]
script = ExtResource("4_3smsa")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="PlayerAnimation"]
position = Vector2(0, 61)
scale = Vector2(0.5, 0.5)
sprite_frames = SubResource("SpriteFrames_qqcod")
animation = &"idle_fly"
metadata/_edit_lock_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, 14)
shape = SubResource("RectangleShape2D_fj7yv")
metadata/_edit_lock_ = true

[node name="LargeDetectionArea" type="Area2D" parent="."]
position = Vector2(2, 85)

[node name="CollisionShape2D" type="CollisionShape2D" parent="LargeDetectionArea"]
position = Vector2(-3, -85)
shape = SubResource("CircleShape2D_v0iea")
debug_color = Color(0.840643, 0.364583, 0.318232, 0.42)

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(0.5, 0.5)

[node name="UI" type="CanvasLayer" parent="."]

[node name="FuelBar" type="ProgressBar" parent="UI"]
offset_left = 738.0
offset_top = 998.0
offset_right = 1243.0
offset_bottom = 1060.0
show_percentage = false
metadata/_edit_use_anchors_ = true

[node name="Minimap" parent="UI" instance=ExtResource("7_8erm5")]
position = Vector2(1836, 84)

[node name="DialogBox" parent="UI" instance=ExtResource("8_f1ek2")]
visible = false
position = Vector2(935, 85)

[node name="ColorRect" type="ColorRect" parent="UI"]
visible = false
offset_right = 1946.0
offset_bottom = 1103.0
color = Color(0, 0, 0, 1)

[node name="AnimationPlayer" type="AnimationPlayer" parent="UI"]
libraries = {
&"": SubResource("AnimationLibrary_tx1dd")
}
autoplay = "begin"

[node name="DeathScreen" type="Control" parent="UI"]
process_mode = 2
visible = false
layout_mode = 3
anchors_preset = 0
offset_right = 1920.0
offset_bottom = 1080.0
script = ExtResource("8_8erm5")

[node name="Restart" type="Button" parent="UI/DeathScreen"]
layout_mode = 0
offset_left = 335.0
offset_top = 363.0
offset_right = 1582.0
offset_bottom = 514.0
theme_override_font_sizes/font_size = 80
text = "Restart Level"

[node name="Menu" type="Button" parent="UI/DeathScreen"]
layout_mode = 0
offset_left = 335.0
offset_top = 564.0
offset_right = 1582.0
offset_bottom = 715.0
theme_override_font_sizes/font_size = 80
text = "Main Menu
"

[node name="Label" type="Label" parent="UI/DeathScreen"]
layout_mode = 0
offset_left = 455.0
offset_top = 136.0
offset_right = 1462.0
offset_bottom = 246.0
theme_override_font_sizes/font_size = 80
text = "You died"
horizontal_alignment = 1

[node name="Audio" type="Node2D" parent="."]
script = ExtResource("8_tx1dd")

[node name="Walk" type="AudioStreamPlayer2D" parent="Audio"]
stream = ExtResource("9_gymyn")
volume_db = -32.311
pitch_scale = 2.17

[node name="Thruster" type="AudioStreamPlayer2D" parent="Audio"]
pitch_scale = 0.88

[node name="Pickup" type="AudioStreamPlayer2D" parent="Audio"]
stream = ExtResource("9_f1ek2")

[connection signal="button_up" from="UI/DeathScreen/Restart" to="UI/DeathScreen" method="_on_restart_button_up"]
[connection signal="button_up" from="UI/DeathScreen/Menu" to="UI/DeathScreen" method="_on_menu_button_up"]
